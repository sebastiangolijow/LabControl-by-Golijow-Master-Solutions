# LabControl Production Environment Configuration
# Copy this file to .env.production and fill in the values
# IMPORTANT: Never commit .env.production to version control!

# ============================================
# Django Settings
# ============================================
DJANGO_SETTINGS_MODULE=config.settings.prod
DJANGO_DEBUG=False

# Generate a new secret key with: openssl rand -base64 64
DJANGO_SECRET_KEY=your-super-secret-key-here-CHANGE-THIS

# Comma-separated list of allowed hosts
# Example: lab.yourdomain.com,www.lab.yourdomain.com,123.45.67.89
DJANGO_ALLOWED_HOSTS=lab.yourdomain.com,www.lab.yourdomain.com,YOUR_VPS_IP

# ============================================
# Database Configuration
# ============================================
POSTGRES_DB=labcontrol_db
POSTGRES_USER=labcontrol_user
POSTGRES_PASSWORD=CHANGE-THIS-TO-STRONG-PASSWORD

# Database URL (constructed from above values)
DATABASE_URL=postgresql://labcontrol_user:CHANGE-THIS-TO-STRONG-PASSWORD@db:5432/labcontrol_db

# ============================================
# Redis & Celery
# ============================================
REDIS_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/0

# ============================================
# Email Configuration (SMTP)
# ============================================
# Django email backend
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend

# SMTP server settings
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True

# Email credentials
# For Gmail: Use App Password (not your regular password)
# https://support.google.com/accounts/answer/185833
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-specific-password

# Default "from" email address
DEFAULT_FROM_EMAIL=LabControl <noreply@yourdomain.com>

# Admin email for error notifications
ADMIN_EMAIL=admin@yourdomain.com

# ============================================
# Frontend Configuration
# ============================================
FRONTEND_URL=https://lab.yourdomain.com

# ============================================
# Security Settings
# ============================================
# Trusted origins for CSRF (comma-separated)
CSRF_TRUSTED_ORIGINS=https://lab.yourdomain.com,https://www.lab.yourdomain.com

# Force HTTPS redirects
SECURE_SSL_REDIRECT=True

# Secure cookies (only send over HTTPS)
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True

# HSTS (HTTP Strict Transport Security) - seconds
# Start with 1 hour (3600), increase to 1 year (31536000) after testing
SECURE_HSTS_SECONDS=3600
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=False

# Content Security Policy
SECURE_CONTENT_TYPE_NOSNIFF=True
SECURE_BROWSER_XSS_FILTER=True
X_FRAME_OPTIONS=SAMEORIGIN

# ============================================
# Backup Configuration (S3-compatible storage)
# ============================================
# Leave empty to disable offsite backups (not recommended)

# S3 bucket name
BACKUP_S3_BUCKET=labcontrol-backups

# S3 endpoint (Hostinger Object Storage or AWS S3)
# Hostinger example: https://storage.hostinger.com
# AWS S3 example: https://s3.amazonaws.com
BACKUP_S3_ENDPOINT=https://storage.hostinger.com

# S3 access credentials
BACKUP_S3_ACCESS_KEY=your-s3-access-key
BACKUP_S3_SECRET_KEY=your-s3-secret-key

# Backup retention in days (local backups)
RETENTION_DAYS=30

# ============================================
# Monitoring & Alerts
# ============================================
# Email for health check alerts
ALERT_EMAIL=admin@yourdomain.com

# Domain for health checks
DOMAIN=https://lab.yourdomain.com

# ============================================
# Application Settings
# ============================================
# Multi-tenant lab client ID (default: 1)
DEFAULT_LAB_CLIENT_ID=1

# File upload size limit (in MB)
MAX_FILE_UPLOAD_SIZE=20

# Session timeout (in seconds)
# Default: 1209600 (2 weeks)
SESSION_COOKIE_AGE=1209600

# ============================================
# Gunicorn Settings
# ============================================
# Number of worker processes (recommendation: 2-4 x CPU cores)
GUNICORN_WORKERS=4

# Number of threads per worker
GUNICORN_THREADS=2

# Request timeout (in seconds)
GUNICORN_TIMEOUT=60

# ============================================
# Celery Settings
# ============================================
# Number of concurrent celery workers
CELERY_CONCURRENCY=2

# ============================================
# Logging
# ============================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ============================================
# Optional: External Services
# ============================================
# Uncomment and configure if using external services

# Sentry (error tracking)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project

# AWS S3 for media files (instead of local storage)
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_STORAGE_BUCKET_NAME=labcontrol-media
# AWS_S3_REGION_NAME=us-east-1

# ============================================
# Development Overrides (optional)
# ============================================
# Uncomment for development/staging environments

# DJANGO_DEBUG=True
# SECURE_SSL_REDIRECT=False
# SESSION_COOKIE_SECURE=False
# CSRF_COOKIE_SECURE=False
